{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\YY\\\\Desktop\\\\cosplay\\\\src\\\\components\\\\ImageCropper.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport { X, Check } from \"lucide-react\";\nimport \"./ImageCropper.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ImageCropper = ({\n  imageSrc,\n  onCrop,\n  onCancel,\n  cropShape = \"circle\" // circle / rect\n}) => {\n  _s();\n  const [crop, setCrop] = useState({\n    x: 0,\n    y: 0\n  });\n  const [zoom, setZoom] = useState(1);\n  const [imageLoaded, setImageLoaded] = useState(false);\n  const [imageSize, setImageSize] = useState({\n    width: 0,\n    height: 0\n  });\n  const [displaySize, setDisplaySize] = useState({\n    width: 0,\n    height: 0\n  });\n  const containerRef = useRef(null);\n  const isDragging = useRef(false);\n  const dragStart = useRef({\n    x: 0,\n    y: 0\n  });\n\n  // 加载图片 & 计算显示尺寸\n  useEffect(() => {\n    if (imageSrc) {\n      const img = new Image();\n      img.onload = () => {\n        setImageSize({\n          width: img.width,\n          height: img.height\n        });\n        setImageLoaded(true);\n        const container = containerRef.current;\n        if (container) {\n          const containerRect = container.getBoundingClientRect();\n          const containerWidth = containerRect.width;\n          const containerHeight = containerRect.height;\n          const imageAspect = img.width / img.height;\n          const containerAspect = containerWidth / containerHeight;\n          let displayWidth, displayHeight;\n          if (imageAspect > containerAspect) {\n            // 图片更宽，以高度为准\n            displayHeight = containerHeight;\n            displayWidth = displayHeight * imageAspect;\n          } else {\n            // 图片更高，以宽度为准\n            displayWidth = containerWidth;\n            displayHeight = displayWidth / imageAspect;\n          }\n          setDisplaySize({\n            width: displayWidth,\n            height: displayHeight\n          });\n          setCrop({\n            x: 0,\n            y: 0\n          }); // 初始偏移为 0\n          setZoom(1);\n        }\n      };\n      img.src = imageSrc;\n    }\n  }, [imageSrc]);\n\n  // 创建图片对象\n  const createImage = url => new Promise((resolve, reject) => {\n    const img = new Image();\n    img.src = url;\n    img.crossOrigin = \"anonymous\";\n    img.onload = () => resolve(img);\n    img.onerror = e => reject(e);\n  });\n\n  // 生成裁剪后的图片\n  const getCroppedImg = async (imageSrc, cropPosition, zoomValue) => {\n    const image = await createImage(imageSrc);\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n    const cropSize = 200; // 输出头像尺寸\n    canvas.width = cropSize;\n    canvas.height = cropSize;\n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    const containerWidth = containerRect.width;\n    const containerHeight = containerRect.height;\n    const scaledWidth = displaySize.width * zoomValue;\n    const scaledHeight = displaySize.height * zoomValue;\n\n    // 裁剪框大小（相对于容器，80%）\n    const frameSize = Math.min(containerWidth, containerHeight) * 0.8;\n\n    // 图片中心点对齐容器中心\n    const offsetX = containerWidth / 2 - scaledWidth / 2 + cropPosition.x;\n    const offsetY = containerHeight / 2 - scaledHeight / 2 + cropPosition.y;\n    const scaleX = imageSize.width / scaledWidth;\n    const scaleY = imageSize.height / scaledHeight;\n\n    // 计算源图截取区域\n    const sourceX = (containerWidth - frameSize) / 2 - offsetX;\n    const sourceY = (containerHeight - frameSize) / 2 - offsetY;\n    const sourceWidth = frameSize;\n    const sourceHeight = frameSize;\n    ctx.save();\n    if (cropShape === \"circle\") {\n      ctx.beginPath();\n      ctx.arc(cropSize / 2, cropSize / 2, cropSize / 2, 0, 2 * Math.PI);\n      ctx.clip();\n    }\n    ctx.drawImage(image, sourceX * scaleX, sourceY * scaleY, sourceWidth * scaleX, sourceHeight * scaleY, 0, 0, cropSize, cropSize);\n    ctx.restore();\n    return new Promise(resolve => {\n      canvas.toBlob(blob => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.readAsDataURL(blob);\n      }, \"image/jpeg\");\n    });\n  };\n\n  // 拖拽\n  const handleMouseDown = e => {\n    e.preventDefault();\n    isDragging.current = true;\n    dragStart.current = {\n      x: e.clientX - crop.x,\n      y: e.clientY - crop.y\n    };\n  };\n  const handleMouseMove = e => {\n    if (!isDragging.current) return;\n    e.preventDefault();\n    const newX = e.clientX - dragStart.current.x;\n    const newY = e.clientY - dragStart.current.y;\n    setCrop({\n      x: newX,\n      y: newY\n    });\n  };\n  const handleMouseUp = () => {\n    isDragging.current = false;\n  };\n\n  // 确认裁剪\n  const handleConfirmCrop = useCallback(async () => {\n    try {\n      const croppedImageData = await getCroppedImg(imageSrc, crop, zoom);\n      onCrop(croppedImageData);\n    } catch (e) {\n      console.error(\"裁剪失败:\", e);\n    }\n  }, [imageSrc, crop, zoom, onCrop]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"image-cropper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cropper-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u88C1\\u526A\\u56FE\\u7247\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cropper-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cancel-btn\",\n          onClick: onCancel,\n          children: [/*#__PURE__*/_jsxDEV(X, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), \" \\u53D6\\u6D88\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"confirm-btn\",\n          onClick: handleConfirmCrop,\n          children: [/*#__PURE__*/_jsxDEV(Check, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this), \" \\u786E\\u8BA4\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cropper-body\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cropper-container\",\n        ref: containerRef,\n        onMouseMove: handleMouseMove,\n        onMouseUp: handleMouseUp,\n        onMouseLeave: handleMouseUp,\n        children: imageLoaded && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: imageSrc,\n            alt: \"\\u88C1\\u526A\\u9884\\u89C8\",\n            className: \"crop-image\",\n            style: {\n              width: displaySize.width,\n              height: displaySize.height,\n              position: \"absolute\",\n              top: \"50%\",\n              left: \"50%\",\n              transform: `translate(-50%, -50%) translate(${crop.x}px, ${crop.y}px) scale(${zoom})`,\n              transformOrigin: \"center center\",\n              cursor: \"grab\"\n            },\n            onMouseDown: handleMouseDown,\n            draggable: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `crop-frame ${cropShape === \"circle\" ? \"circle\" : \"rect\"}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cropper-controls\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"zoom-control\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u7F29\\u653E:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: 0.5,\n          max: 3,\n          step: 0.1,\n          value: zoom,\n          onChange: e => setZoom(parseFloat(e.target.value))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [zoom.toFixed(1), \"x\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cropper-footer\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u62D6\\u62FD\\u56FE\\u7247\\u8C03\\u6574\\u4F4D\\u7F6E\\uFF0C\\u4F7F\\u7528\\u6ED1\\u5757\\u8C03\\u6574\\u7F29\\u653E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 5\n  }, this);\n};\n_s(ImageCropper, \"cSGf08TmT1lB4zgTASYFQaGGZWw=\");\n_c = ImageCropper;\nexport default ImageCropper;\nvar _c;\n$RefreshReg$(_c, \"ImageCropper\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","X","Check","jsxDEV","_jsxDEV","Fragment","_Fragment","ImageCropper","imageSrc","onCrop","onCancel","cropShape","_s","crop","setCrop","x","y","zoom","setZoom","imageLoaded","setImageLoaded","imageSize","setImageSize","width","height","displaySize","setDisplaySize","containerRef","isDragging","dragStart","img","Image","onload","container","current","containerRect","getBoundingClientRect","containerWidth","containerHeight","imageAspect","containerAspect","displayWidth","displayHeight","src","createImage","url","Promise","resolve","reject","crossOrigin","onerror","e","getCroppedImg","cropPosition","zoomValue","image","canvas","document","createElement","ctx","getContext","cropSize","scaledWidth","scaledHeight","frameSize","Math","min","offsetX","offsetY","scaleX","scaleY","sourceX","sourceY","sourceWidth","sourceHeight","save","beginPath","arc","PI","clip","drawImage","restore","toBlob","blob","reader","FileReader","result","readAsDataURL","handleMouseDown","preventDefault","clientX","clientY","handleMouseMove","newX","newY","handleMouseUp","handleConfirmCrop","croppedImageData","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","ref","onMouseMove","onMouseUp","onMouseLeave","alt","style","position","top","left","transform","transformOrigin","cursor","onMouseDown","draggable","type","max","step","value","onChange","parseFloat","target","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/YY/Desktop/cosplay/src/components/ImageCropper.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport { X, Check } from \"lucide-react\";\r\nimport \"./ImageCropper.css\";\r\n\r\nconst ImageCropper = ({\r\n  imageSrc,\r\n  onCrop,\r\n  onCancel,\r\n  cropShape = \"circle\", // circle / rect\r\n}) => {\r\n  const [crop, setCrop] = useState({ x: 0, y: 0 });\r\n  const [zoom, setZoom] = useState(1);\r\n  const [imageLoaded, setImageLoaded] = useState(false);\r\n  const [imageSize, setImageSize] = useState({ width: 0, height: 0 });\r\n  const [displaySize, setDisplaySize] = useState({ width: 0, height: 0 });\r\n\r\n  const containerRef = useRef(null);\r\n  const isDragging = useRef(false);\r\n  const dragStart = useRef({ x: 0, y: 0 });\r\n\r\n  // 加载图片 & 计算显示尺寸\r\n  useEffect(() => {\r\n    if (imageSrc) {\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        setImageSize({ width: img.width, height: img.height });\r\n        setImageLoaded(true);\r\n\r\n        const container = containerRef.current;\r\n        if (container) {\r\n          const containerRect = container.getBoundingClientRect();\r\n          const containerWidth = containerRect.width;\r\n          const containerHeight = containerRect.height;\r\n\r\n          const imageAspect = img.width / img.height;\r\n          const containerAspect = containerWidth / containerHeight;\r\n\r\n          let displayWidth, displayHeight;\r\n\r\n          if (imageAspect > containerAspect) {\r\n            // 图片更宽，以高度为准\r\n            displayHeight = containerHeight;\r\n            displayWidth = displayHeight * imageAspect;\r\n          } else {\r\n            // 图片更高，以宽度为准\r\n            displayWidth = containerWidth;\r\n            displayHeight = displayWidth / imageAspect;\r\n          }\r\n\r\n          setDisplaySize({ width: displayWidth, height: displayHeight });\r\n          setCrop({ x: 0, y: 0 }); // 初始偏移为 0\r\n          setZoom(1);\r\n        }\r\n      };\r\n      img.src = imageSrc;\r\n    }\r\n  }, [imageSrc]);\r\n\r\n  // 创建图片对象\r\n  const createImage = (url) =>\r\n    new Promise((resolve, reject) => {\r\n      const img = new Image();\r\n      img.src = url;\r\n      img.crossOrigin = \"anonymous\";\r\n      img.onload = () => resolve(img);\r\n      img.onerror = (e) => reject(e);\r\n    });\r\n\r\n  // 生成裁剪后的图片\r\n  const getCroppedImg = async (imageSrc, cropPosition, zoomValue) => {\r\n    const image = await createImage(imageSrc);\r\n    const canvas = document.createElement(\"canvas\");\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    const cropSize = 200; // 输出头像尺寸\r\n    canvas.width = cropSize;\r\n    canvas.height = cropSize;\r\n\r\n    const container = containerRef.current;\r\n    const containerRect = container.getBoundingClientRect();\r\n    const containerWidth = containerRect.width;\r\n    const containerHeight = containerRect.height;\r\n\r\n    const scaledWidth = displaySize.width * zoomValue;\r\n    const scaledHeight = displaySize.height * zoomValue;\r\n\r\n    // 裁剪框大小（相对于容器，80%）\r\n    const frameSize = Math.min(containerWidth, containerHeight) * 0.8;\r\n\r\n    // 图片中心点对齐容器中心\r\n    const offsetX = containerWidth / 2 - scaledWidth / 2 + cropPosition.x;\r\n    const offsetY = containerHeight / 2 - scaledHeight / 2 + cropPosition.y;\r\n\r\n    const scaleX = imageSize.width / scaledWidth;\r\n    const scaleY = imageSize.height / scaledHeight;\r\n\r\n    // 计算源图截取区域\r\n    const sourceX = (containerWidth - frameSize) / 2 - offsetX;\r\n    const sourceY = (containerHeight - frameSize) / 2 - offsetY;\r\n    const sourceWidth = frameSize;\r\n    const sourceHeight = frameSize;\r\n\r\n    ctx.save();\r\n\r\n    if (cropShape === \"circle\") {\r\n      ctx.beginPath();\r\n      ctx.arc(cropSize / 2, cropSize / 2, cropSize / 2, 0, 2 * Math.PI);\r\n      ctx.clip();\r\n    }\r\n\r\n    ctx.drawImage(\r\n      image,\r\n      sourceX * scaleX,\r\n      sourceY * scaleY,\r\n      sourceWidth * scaleX,\r\n      sourceHeight * scaleY,\r\n      0,\r\n      0,\r\n      cropSize,\r\n      cropSize\r\n    );\r\n\r\n    ctx.restore();\r\n\r\n    return new Promise((resolve) => {\r\n      canvas.toBlob((blob) => {\r\n        const reader = new FileReader();\r\n        reader.onload = () => resolve(reader.result);\r\n        reader.readAsDataURL(blob);\r\n      }, \"image/jpeg\");\r\n    });\r\n  };\r\n\r\n  // 拖拽\r\n  const handleMouseDown = (e) => {\r\n    e.preventDefault();\r\n    isDragging.current = true;\r\n    dragStart.current = { x: e.clientX - crop.x, y: e.clientY - crop.y };\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (!isDragging.current) return;\r\n    e.preventDefault();\r\n\r\n    const newX = e.clientX - dragStart.current.x;\r\n    const newY = e.clientY - dragStart.current.y;\r\n\r\n    setCrop({ x: newX, y: newY });\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    isDragging.current = false;\r\n  };\r\n\r\n  // 确认裁剪\r\n  const handleConfirmCrop = useCallback(async () => {\r\n    try {\r\n      const croppedImageData = await getCroppedImg(imageSrc, crop, zoom);\r\n      onCrop(croppedImageData);\r\n    } catch (e) {\r\n      console.error(\"裁剪失败:\", e);\r\n    }\r\n  }, [imageSrc, crop, zoom, onCrop]);\r\n\r\n  return (\r\n    <div className=\"image-cropper\">\r\n      <div className=\"cropper-header\">\r\n        <h3>裁剪图片</h3>\r\n        <div className=\"cropper-actions\">\r\n          <button className=\"cancel-btn\" onClick={onCancel}>\r\n            <X size={16} /> 取消\r\n          </button>\r\n          <button className=\"confirm-btn\" onClick={handleConfirmCrop}>\r\n            <Check size={16} /> 确认\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"cropper-body\">\r\n        <div\r\n          className=\"cropper-container\"\r\n          ref={containerRef}\r\n          onMouseMove={handleMouseMove}\r\n          onMouseUp={handleMouseUp}\r\n          onMouseLeave={handleMouseUp}\r\n        >\r\n          {imageLoaded && (\r\n            <>\r\n              <img\r\n                src={imageSrc}\r\n                alt=\"裁剪预览\"\r\n                className=\"crop-image\"\r\n                style={{\r\n                  width: displaySize.width,\r\n                  height: displaySize.height,\r\n                  position: \"absolute\",\r\n                  top: \"50%\",\r\n                  left: \"50%\",\r\n                  transform: `translate(-50%, -50%) translate(${crop.x}px, ${crop.y}px) scale(${zoom})`,\r\n                  transformOrigin: \"center center\",\r\n                  cursor: \"grab\",\r\n                }}\r\n                onMouseDown={handleMouseDown}\r\n                draggable={false}\r\n              />\r\n\r\n              {/* 裁剪框 */}\r\n              <div\r\n                className={`crop-frame ${\r\n                  cropShape === \"circle\" ? \"circle\" : \"rect\"\r\n                }`}\r\n              />\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"cropper-controls\">\r\n        <div className=\"zoom-control\">\r\n          <label>缩放:</label>\r\n          <input\r\n            type=\"range\"\r\n            min={0.5}\r\n            max={3}\r\n            step={0.1}\r\n            value={zoom}\r\n            onChange={(e) => setZoom(parseFloat(e.target.value))}\r\n          />\r\n          <span>{zoom.toFixed(1)}x</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"cropper-footer\">\r\n        <p>拖拽图片调整位置，使用滑块调整缩放</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageCropper;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}