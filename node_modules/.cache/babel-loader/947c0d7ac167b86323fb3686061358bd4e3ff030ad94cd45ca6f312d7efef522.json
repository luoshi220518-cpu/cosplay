{"ast":null,"code":"// 图片上传和管理服务\nclass ImageService {\n  constructor() {\n    this.maxFileSize = 5 * 1024 * 1024; // 5MB\n    this.allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];\n    this.defaultImages = {\n      userAvatar: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM2NjdlZWEiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSI4IiB5PSI4Ij4KPHBhdGggZD0iTTIwIDIxVjE5QzIwIDE3Ljg5NTQgMTkuMTA0NiAxNyAxOCAxN0g2QzQuODk1NDMgMTcgNCAxNy44OTU0IDQgMTlWMjEiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cjwvc3ZnPgo=',\n      characterAvatar: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM2NjdlZWEiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSI4IiB5PSI4Ij4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4KPC9zdmc+Cg==',\n      chatBackground: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\n    };\n  }\n\n  // 验证文件\n  validateFile(file) {\n    if (!file) {\n      throw new Error('请选择文件');\n    }\n    if (!this.allowedTypes.includes(file.type)) {\n      throw new Error('只支持 JPG、PNG、GIF、WebP 格式的图片');\n    }\n    if (file.size > this.maxFileSize) {\n      throw new Error('图片大小不能超过 5MB');\n    }\n    return true;\n  }\n\n  // 压缩图片\n  compressImage(file, maxWidth = 800, quality = 0.8) {\n    return new Promise(resolve => {\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n      img.onload = () => {\n        // 计算新尺寸\n        let {\n          width,\n          height\n        } = img;\n        if (width > maxWidth) {\n          height = height * maxWidth / width;\n          width = maxWidth;\n        }\n        canvas.width = width;\n        canvas.height = height;\n\n        // 绘制压缩后的图片\n        ctx.drawImage(img, 0, 0, width, height);\n\n        // 转换为blob\n        canvas.toBlob(resolve, file.type, quality);\n      };\n      img.src = URL.createObjectURL(file);\n    });\n  }\n\n  // 从base64压缩图片\n  compressImageFromBase64(base64Data, type = 'general') {\n    return new Promise(resolve => {\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      const img = new Image();\n      img.onload = () => {\n        // 根据类型设置不同的压缩参数\n        let maxWidth = 800;\n        let quality = 0.8;\n        switch (type) {\n          case 'avatar':\n            maxWidth = 200;\n            quality = 0.9;\n            break;\n          case 'background':\n            maxWidth = 1200;\n            quality = 0.7;\n            break;\n          default:\n            maxWidth = 800;\n            quality = 0.8;\n        }\n\n        // 计算新尺寸\n        let {\n          width,\n          height\n        } = img;\n        if (width > maxWidth) {\n          height = height * maxWidth / width;\n          width = maxWidth;\n        }\n        canvas.width = width;\n        canvas.height = height;\n\n        // 绘制压缩后的图片\n        ctx.drawImage(img, 0, 0, width, height);\n\n        // 转换为base64\n        const compressedBase64 = canvas.toDataURL('image/jpeg', quality);\n        resolve(compressedBase64);\n      };\n      img.src = base64Data;\n    });\n  }\n\n  // 上传图片（转换为base64）\n  async uploadImage(file, type = 'general') {\n    try {\n      this.validateFile(file);\n\n      // 根据类型设置不同的压缩参数\n      let maxWidth = 800;\n      let quality = 0.8;\n      switch (type) {\n        case 'avatar':\n          maxWidth = 200;\n          quality = 0.9;\n          break;\n        case 'background':\n          maxWidth = 1200;\n          quality = 0.7;\n          break;\n        default:\n          maxWidth = 800;\n          quality = 0.8;\n      }\n      const compressedFile = await this.compressImage(file, maxWidth, quality);\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = reject;\n        reader.readAsDataURL(compressedFile);\n      });\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  // 保存图片到本地存储\n  saveImage(key, imageData) {\n    try {\n      localStorage.setItem(`image_${key}`, imageData);\n      return true;\n    } catch (error) {\n      console.error('保存图片失败:', error);\n      return false;\n    }\n  }\n\n  // 从本地存储获取图片\n  getImage(key) {\n    try {\n      return localStorage.getItem(`image_${key}`) || this.getDefaultImage(key);\n    } catch (error) {\n      console.error('获取图片失败:', error);\n      return this.getDefaultImage(key);\n    }\n  }\n\n  // 获取默认图片\n  getDefaultImage(type) {\n    return this.defaultImages[type] || this.defaultImages.characterAvatar;\n  }\n\n  // 删除图片\n  deleteImage(key) {\n    try {\n      localStorage.removeItem(`image_${key}`);\n      return true;\n    } catch (error) {\n      console.error('删除图片失败:', error);\n      return false;\n    }\n  }\n\n  // 获取用户头像\n  getUserAvatar(userId) {\n    return this.getImage(`user_${userId}`);\n  }\n\n  // 保存用户头像\n  saveUserAvatar(userId, imageData) {\n    return this.saveImage(`user_${userId}`, imageData);\n  }\n\n  // 获取角色头像\n  getCharacterAvatar(characterId) {\n    return this.getImage(`character_${characterId}`);\n  }\n\n  // 保存角色头像\n  saveCharacterAvatar(characterId, imageData) {\n    return this.saveImage(`character_${characterId}`, imageData);\n  }\n\n  // 获取聊天背景\n  getChatBackground(characterId) {\n    return this.getImage(`background_${characterId}`);\n  }\n\n  // 保存聊天背景\n  saveChatBackground(characterId, imageData) {\n    return this.saveImage(`background_${characterId}`, imageData);\n  }\n\n  // 清除所有图片缓存\n  clearAllImages() {\n    try {\n      const keys = Object.keys(localStorage);\n      keys.forEach(key => {\n        if (key.startsWith('image_')) {\n          localStorage.removeItem(key);\n        }\n      });\n      return true;\n    } catch (error) {\n      console.error('清除图片缓存失败:', error);\n      return false;\n    }\n  }\n\n  // 获取存储使用情况\n  getStorageInfo() {\n    try {\n      const keys = Object.keys(localStorage);\n      const imageKeys = keys.filter(key => key.startsWith('image_'));\n      let totalSize = 0;\n      imageKeys.forEach(key => {\n        const data = localStorage.getItem(key);\n        if (data) {\n          totalSize += data.length;\n        }\n      });\n      return {\n        imageCount: imageKeys.length,\n        totalSize: totalSize,\n        totalSizeMB: (totalSize / 1024 / 1024).toFixed(2)\n      };\n    } catch (error) {\n      console.error('获取存储信息失败:', error);\n      return {\n        imageCount: 0,\n        totalSize: 0,\n        totalSizeMB: '0.00'\n      };\n    }\n  }\n}\n\n// 创建单例实例\nconst imageService = new ImageService();\nexport default imageService;","map":{"version":3,"names":["ImageService","constructor","maxFileSize","allowedTypes","defaultImages","userAvatar","characterAvatar","chatBackground","validateFile","file","Error","includes","type","size","compressImage","maxWidth","quality","Promise","resolve","canvas","document","createElement","ctx","getContext","img","Image","onload","width","height","drawImage","toBlob","src","URL","createObjectURL","compressImageFromBase64","base64Data","compressedBase64","toDataURL","uploadImage","compressedFile","reject","reader","FileReader","result","onerror","readAsDataURL","error","saveImage","key","imageData","localStorage","setItem","console","getImage","getItem","getDefaultImage","deleteImage","removeItem","getUserAvatar","userId","saveUserAvatar","getCharacterAvatar","characterId","saveCharacterAvatar","getChatBackground","saveChatBackground","clearAllImages","keys","Object","forEach","startsWith","getStorageInfo","imageKeys","filter","totalSize","data","length","imageCount","totalSizeMB","toFixed","imageService"],"sources":["C:/Users/YY/Desktop/cosplay/src/services/imageService.js"],"sourcesContent":["// 图片上传和管理服务\r\nclass ImageService {\r\n  constructor() {\r\n    this.maxFileSize = 5 * 1024 * 1024; // 5MB\r\n    this.allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];\r\n    this.defaultImages = {\r\n      userAvatar: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM2NjdlZWEiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSI4IiB5PSI4Ij4KPHBhdGggZD0iTTIwIDIxVjE5QzIwIDE3Ljg5NTQgMTkuMTA0NiAxNyAxOCAxN0g2QzQuODk1NDMgMTcgNCAxNy44OTU0IDQgMTlWMjEiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxjaXJjbGUgY3g9IjEyIiBjeT0iNyIgcj0iNCIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cjwvc3ZnPgo=',\r\n      characterAvatar: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM2NjdlZWEiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSI4IiB5PSI4Ij4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMCA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDQgOUwxMC45MSA4LjI2TDEyIDJaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4KPC9zdmc+Cg==',\r\n      chatBackground: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'\r\n    };\r\n  }\r\n\r\n  // 验证文件\r\n  validateFile(file) {\r\n    if (!file) {\r\n      throw new Error('请选择文件');\r\n    }\r\n\r\n    if (!this.allowedTypes.includes(file.type)) {\r\n      throw new Error('只支持 JPG、PNG、GIF、WebP 格式的图片');\r\n    }\r\n\r\n    if (file.size > this.maxFileSize) {\r\n      throw new Error('图片大小不能超过 5MB');\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  // 压缩图片\r\n  compressImage(file, maxWidth = 800, quality = 0.8) {\r\n    return new Promise((resolve) => {\r\n      const canvas = document.createElement('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      const img = new Image();\r\n\r\n      img.onload = () => {\r\n        // 计算新尺寸\r\n        let { width, height } = img;\r\n        if (width > maxWidth) {\r\n          height = (height * maxWidth) / width;\r\n          width = maxWidth;\r\n        }\r\n\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        // 绘制压缩后的图片\r\n        ctx.drawImage(img, 0, 0, width, height);\r\n\r\n        // 转换为blob\r\n        canvas.toBlob(resolve, file.type, quality);\r\n      };\r\n\r\n      img.src = URL.createObjectURL(file);\r\n    });\r\n  }\r\n\r\n  // 从base64压缩图片\r\n  compressImageFromBase64(base64Data, type = 'general') {\r\n    return new Promise((resolve) => {\r\n      const canvas = document.createElement('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      const img = new Image();\r\n\r\n      img.onload = () => {\r\n        // 根据类型设置不同的压缩参数\r\n        let maxWidth = 800;\r\n        let quality = 0.8;\r\n        \r\n        switch (type) {\r\n          case 'avatar':\r\n            maxWidth = 200;\r\n            quality = 0.9;\r\n            break;\r\n          case 'background':\r\n            maxWidth = 1200;\r\n            quality = 0.7;\r\n            break;\r\n          default:\r\n            maxWidth = 800;\r\n            quality = 0.8;\r\n        }\r\n\r\n        // 计算新尺寸\r\n        let { width, height } = img;\r\n        if (width > maxWidth) {\r\n          height = (height * maxWidth) / width;\r\n          width = maxWidth;\r\n        }\r\n\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        // 绘制压缩后的图片\r\n        ctx.drawImage(img, 0, 0, width, height);\r\n\r\n        // 转换为base64\r\n        const compressedBase64 = canvas.toDataURL('image/jpeg', quality);\r\n        resolve(compressedBase64);\r\n      };\r\n\r\n      img.src = base64Data;\r\n    });\r\n  }\r\n\r\n  // 上传图片（转换为base64）\r\n  async uploadImage(file, type = 'general') {\r\n    try {\r\n      this.validateFile(file);\r\n      \r\n      // 根据类型设置不同的压缩参数\r\n      let maxWidth = 800;\r\n      let quality = 0.8;\r\n      \r\n      switch (type) {\r\n        case 'avatar':\r\n          maxWidth = 200;\r\n          quality = 0.9;\r\n          break;\r\n        case 'background':\r\n          maxWidth = 1200;\r\n          quality = 0.7;\r\n          break;\r\n        default:\r\n          maxWidth = 800;\r\n          quality = 0.8;\r\n      }\r\n\r\n      const compressedFile = await this.compressImage(file, maxWidth, quality);\r\n      \r\n      return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.onload = () => resolve(reader.result);\r\n        reader.onerror = reject;\r\n        reader.readAsDataURL(compressedFile);\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // 保存图片到本地存储\r\n  saveImage(key, imageData) {\r\n    try {\r\n      localStorage.setItem(`image_${key}`, imageData);\r\n      return true;\r\n    } catch (error) {\r\n      console.error('保存图片失败:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // 从本地存储获取图片\r\n  getImage(key) {\r\n    try {\r\n      return localStorage.getItem(`image_${key}`) || this.getDefaultImage(key);\r\n    } catch (error) {\r\n      console.error('获取图片失败:', error);\r\n      return this.getDefaultImage(key);\r\n    }\r\n  }\r\n\r\n  // 获取默认图片\r\n  getDefaultImage(type) {\r\n    return this.defaultImages[type] || this.defaultImages.characterAvatar;\r\n  }\r\n\r\n  // 删除图片\r\n  deleteImage(key) {\r\n    try {\r\n      localStorage.removeItem(`image_${key}`);\r\n      return true;\r\n    } catch (error) {\r\n      console.error('删除图片失败:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // 获取用户头像\r\n  getUserAvatar(userId) {\r\n    return this.getImage(`user_${userId}`);\r\n  }\r\n\r\n  // 保存用户头像\r\n  saveUserAvatar(userId, imageData) {\r\n    return this.saveImage(`user_${userId}`, imageData);\r\n  }\r\n\r\n  // 获取角色头像\r\n  getCharacterAvatar(characterId) {\r\n    return this.getImage(`character_${characterId}`);\r\n  }\r\n\r\n  // 保存角色头像\r\n  saveCharacterAvatar(characterId, imageData) {\r\n    return this.saveImage(`character_${characterId}`, imageData);\r\n  }\r\n\r\n  // 获取聊天背景\r\n  getChatBackground(characterId) {\r\n    return this.getImage(`background_${characterId}`);\r\n  }\r\n\r\n  // 保存聊天背景\r\n  saveChatBackground(characterId, imageData) {\r\n    return this.saveImage(`background_${characterId}`, imageData);\r\n  }\r\n\r\n  // 清除所有图片缓存\r\n  clearAllImages() {\r\n    try {\r\n      const keys = Object.keys(localStorage);\r\n      keys.forEach(key => {\r\n        if (key.startsWith('image_')) {\r\n          localStorage.removeItem(key);\r\n        }\r\n      });\r\n      return true;\r\n    } catch (error) {\r\n      console.error('清除图片缓存失败:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // 获取存储使用情况\r\n  getStorageInfo() {\r\n    try {\r\n      const keys = Object.keys(localStorage);\r\n      const imageKeys = keys.filter(key => key.startsWith('image_'));\r\n      let totalSize = 0;\r\n      \r\n      imageKeys.forEach(key => {\r\n        const data = localStorage.getItem(key);\r\n        if (data) {\r\n          totalSize += data.length;\r\n        }\r\n      });\r\n\r\n      return {\r\n        imageCount: imageKeys.length,\r\n        totalSize: totalSize,\r\n        totalSizeMB: (totalSize / 1024 / 1024).toFixed(2)\r\n      };\r\n    } catch (error) {\r\n      console.error('获取存储信息失败:', error);\r\n      return { imageCount: 0, totalSize: 0, totalSizeMB: '0.00' };\r\n    }\r\n  }\r\n}\r\n\r\n// 创建单例实例\r\nconst imageService = new ImageService();\r\n\r\nexport default imageService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}