{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\YY\\\\Desktop\\\\cosplay\\\\src\\\\components\\\\ImageCropper.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useRef, useEffect } from 'react';\nimport { X, Check } from 'lucide-react';\nimport './ImageCropper.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ImageCropper = ({\n  imageSrc,\n  onCrop,\n  onCancel,\n  aspectRatio = 1,\n  cropShape = 'circle'\n}) => {\n  _s();\n  const [crop, setCrop] = useState({\n    x: 0,\n    y: 0\n  });\n  const [zoom, setZoom] = useState(1);\n  const [imageLoaded, setImageLoaded] = useState(false);\n  const [imageSize, setImageSize] = useState({\n    width: 0,\n    height: 0\n  });\n  const [displaySize, setDisplaySize] = useState({\n    width: 0,\n    height: 0\n  });\n  const containerRef = useRef(null);\n  const imageRef = useRef(null);\n  const isDragging = useRef(false);\n  const dragStart = useRef({\n    x: 0,\n    y: 0\n  });\n  useEffect(() => {\n    if (imageSrc) {\n      const img = new Image();\n      img.onload = () => {\n        setImageSize({\n          width: img.width,\n          height: img.height\n        });\n        setImageLoaded(true);\n\n        // 计算图片在容器中的显示尺寸，确保完全填充\n        const container = containerRef.current;\n        if (container) {\n          const containerRect = container.getBoundingClientRect();\n          const containerWidth = containerRect.width;\n          const containerHeight = containerRect.height;\n          const imageAspect = img.width / img.height;\n          const containerAspect = containerWidth / containerHeight;\n          let displayWidth, displayHeight;\n          if (imageAspect > containerAspect) {\n            // 图片更宽，以高度为准\n            displayHeight = containerHeight;\n            displayWidth = displayHeight * imageAspect;\n          } else {\n            // 图片更高，以宽度为准\n            displayWidth = containerWidth;\n            displayHeight = displayWidth / imageAspect;\n          }\n          setDisplaySize({\n            width: displayWidth,\n            height: displayHeight\n          });\n        }\n      };\n      img.src = imageSrc;\n    }\n  }, [imageSrc]);\n\n  // 创建图片对象\n  const createImage = url => new Promise((resolve, reject) => {\n    const img = new Image();\n    img.src = url;\n    img.crossOrigin = \"anonymous\";\n    img.onload = () => resolve(img);\n    img.onerror = e => reject(e);\n  });\n\n  // 生成裁剪后的图片\n  const getCroppedImg = async (imageSrc, cropArea) => {\n    const image = await createImage(imageSrc);\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n    const cropSize = 200; // 固定裁剪尺寸\n    canvas.width = cropSize;\n    canvas.height = cropSize;\n\n    // 如果是圆形裁剪\n    if (cropShape === 'circle') {\n      ctx.beginPath();\n      ctx.arc(cropSize / 2, cropSize / 2, cropSize / 2, 0, 2 * Math.PI);\n      ctx.clip();\n    }\n\n    // 计算裁剪区域\n    const scaleX = image.width / containerSize.width;\n    const scaleY = image.height / containerSize.height;\n    const sourceX = (crop.x + (containerSize.width - cropSize) / 2) * scaleX;\n    const sourceY = (crop.y + (containerSize.height - cropSize) / 2) * scaleY;\n    const sourceWidth = cropSize * scaleX;\n    const sourceHeight = cropSize * scaleY;\n    ctx.drawImage(image, sourceX, sourceY, sourceWidth, sourceHeight, 0, 0, cropSize, cropSize);\n    return new Promise(resolve => {\n      canvas.toBlob(blob => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.readAsDataURL(blob);\n      }, \"image/jpeg\", 0.9);\n    });\n  };\n\n  // 处理鼠标按下\n  const handleMouseDown = e => {\n    e.preventDefault();\n    isDragging.current = true;\n    dragStart.current = {\n      x: e.clientX - crop.x,\n      y: e.clientY - crop.y\n    };\n  };\n\n  // 处理鼠标移动\n  const handleMouseMove = e => {\n    if (!isDragging.current) return;\n    e.preventDefault();\n    const newX = e.clientX - dragStart.current.x;\n    const newY = e.clientY - dragStart.current.y;\n\n    // 限制拖拽范围\n    const maxX = (containerSize.width - 200) / 2;\n    const maxY = (containerSize.height - 200) / 2;\n    setCrop({\n      x: Math.max(-maxX, Math.min(maxX, newX)),\n      y: Math.max(-maxY, Math.min(maxY, newY))\n    });\n  };\n\n  // 处理鼠标释放\n  const handleMouseUp = () => {\n    isDragging.current = false;\n  };\n\n  // 确认裁剪\n  const handleConfirmCrop = useCallback(async () => {\n    try {\n      const croppedImageData = await getCroppedImg(imageSrc, crop);\n      onCrop(croppedImageData);\n    } catch (e) {\n      console.error('裁剪失败:', e);\n    }\n  }, [imageSrc, crop, onCrop]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"image-cropper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cropper-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u88C1\\u526A\\u56FE\\u7247\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cropper-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cancel-btn\",\n          onClick: onCancel,\n          children: [/*#__PURE__*/_jsxDEV(X, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), \"\\u53D6\\u6D88\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"confirm-btn\",\n          onClick: handleConfirmCrop,\n          children: [/*#__PURE__*/_jsxDEV(Check, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), \"\\u786E\\u8BA4\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cropper-body\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cropper-container\",\n        ref: containerRef,\n        onMouseMove: handleMouseMove,\n        onMouseUp: handleMouseUp,\n        onMouseLeave: handleMouseUp,\n        children: imageLoaded && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            ref: imageRef,\n            src: imageSrc,\n            alt: \"\\u88C1\\u526A\\u9884\\u89C8\",\n            className: \"crop-image\",\n            style: {\n              width: containerSize.width,\n              height: containerSize.height,\n              transform: `translate(${crop.x}px, ${crop.y}px) scale(${zoom})`,\n              transformOrigin: 'center center'\n            },\n            onMouseDown: handleMouseDown,\n            draggable: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `crop-frame ${cropShape === 'circle' ? 'circle' : 'rect'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cropper-controls\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"zoom-control\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\u7F29\\u653E:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: 0.5,\n          max: 3,\n          step: 0.1,\n          value: zoom,\n          onChange: e => setZoom(parseFloat(e.target.value))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [zoom.toFixed(1), \"x\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cropper-footer\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u62D6\\u62FD\\u56FE\\u7247\\u8C03\\u6574\\u4F4D\\u7F6E\\uFF0C\\u4F7F\\u7528\\u6ED1\\u5757\\u8C03\\u6574\\u7F29\\u653E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n};\n_s(ImageCropper, \"fXMTCLspfEDPDhr2D6hgXsWQoHk=\");\n_c = ImageCropper;\nexport default ImageCropper;\nvar _c;\n$RefreshReg$(_c, \"ImageCropper\");","map":{"version":3,"names":["React","useState","useCallback","useRef","useEffect","X","Check","jsxDEV","_jsxDEV","Fragment","_Fragment","ImageCropper","imageSrc","onCrop","onCancel","aspectRatio","cropShape","_s","crop","setCrop","x","y","zoom","setZoom","imageLoaded","setImageLoaded","imageSize","setImageSize","width","height","displaySize","setDisplaySize","containerRef","imageRef","isDragging","dragStart","img","Image","onload","container","current","containerRect","getBoundingClientRect","containerWidth","containerHeight","imageAspect","containerAspect","displayWidth","displayHeight","src","createImage","url","Promise","resolve","reject","crossOrigin","onerror","e","getCroppedImg","cropArea","image","canvas","document","createElement","ctx","getContext","cropSize","beginPath","arc","Math","PI","clip","scaleX","containerSize","scaleY","sourceX","sourceY","sourceWidth","sourceHeight","drawImage","toBlob","blob","reader","FileReader","result","readAsDataURL","handleMouseDown","preventDefault","clientX","clientY","handleMouseMove","newX","newY","maxX","maxY","max","min","handleMouseUp","handleConfirmCrop","croppedImageData","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","ref","onMouseMove","onMouseUp","onMouseLeave","alt","style","transform","transformOrigin","onMouseDown","draggable","type","step","value","onChange","parseFloat","target","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/YY/Desktop/cosplay/src/components/ImageCropper.js"],"sourcesContent":["import React, { useState, useCallback, useRef, useEffect } from 'react';\r\nimport { X, Check } from 'lucide-react';\r\nimport './ImageCropper.css';\r\n\r\nconst ImageCropper = ({ \r\n  imageSrc, \r\n  onCrop, \r\n  onCancel, \r\n  aspectRatio = 1, \r\n  cropShape = 'circle' \r\n}) => {\r\n  const [crop, setCrop] = useState({ x: 0, y: 0 });\r\n  const [zoom, setZoom] = useState(1);\r\n  const [imageLoaded, setImageLoaded] = useState(false);\r\n  const [imageSize, setImageSize] = useState({ width: 0, height: 0 });\r\n  const [displaySize, setDisplaySize] = useState({ width: 0, height: 0 });\r\n  \r\n  const containerRef = useRef(null);\r\n  const imageRef = useRef(null);\r\n  const isDragging = useRef(false);\r\n  const dragStart = useRef({ x: 0, y: 0 });\r\n\r\n  useEffect(() => {\r\n    if (imageSrc) {\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        setImageSize({ width: img.width, height: img.height });\r\n        setImageLoaded(true);\r\n        \r\n        // 计算图片在容器中的显示尺寸，确保完全填充\r\n        const container = containerRef.current;\r\n        if (container) {\r\n          const containerRect = container.getBoundingClientRect();\r\n          const containerWidth = containerRect.width;\r\n          const containerHeight = containerRect.height;\r\n          \r\n          const imageAspect = img.width / img.height;\r\n          const containerAspect = containerWidth / containerHeight;\r\n          \r\n          let displayWidth, displayHeight;\r\n          \r\n          if (imageAspect > containerAspect) {\r\n            // 图片更宽，以高度为准\r\n            displayHeight = containerHeight;\r\n            displayWidth = displayHeight * imageAspect;\r\n          } else {\r\n            // 图片更高，以宽度为准\r\n            displayWidth = containerWidth;\r\n            displayHeight = displayWidth / imageAspect;\r\n          }\r\n          \r\n          setDisplaySize({ width: displayWidth, height: displayHeight });\r\n        }\r\n      };\r\n      img.src = imageSrc;\r\n    }\r\n  }, [imageSrc]);\r\n\r\n  // 创建图片对象\r\n  const createImage = (url) =>\r\n    new Promise((resolve, reject) => {\r\n      const img = new Image();\r\n      img.src = url;\r\n      img.crossOrigin = \"anonymous\";\r\n      img.onload = () => resolve(img);\r\n      img.onerror = (e) => reject(e);\r\n    });\r\n\r\n  // 生成裁剪后的图片\r\n  const getCroppedImg = async (imageSrc, cropArea) => {\r\n    const image = await createImage(imageSrc);\r\n    const canvas = document.createElement(\"canvas\");\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    const cropSize = 200; // 固定裁剪尺寸\r\n    canvas.width = cropSize;\r\n    canvas.height = cropSize;\r\n\r\n    // 如果是圆形裁剪\r\n    if (cropShape === 'circle') {\r\n      ctx.beginPath();\r\n      ctx.arc(cropSize / 2, cropSize / 2, cropSize / 2, 0, 2 * Math.PI);\r\n      ctx.clip();\r\n    }\r\n\r\n    // 计算裁剪区域\r\n    const scaleX = image.width / containerSize.width;\r\n    const scaleY = image.height / containerSize.height;\r\n    \r\n    const sourceX = (crop.x + (containerSize.width - cropSize) / 2) * scaleX;\r\n    const sourceY = (crop.y + (containerSize.height - cropSize) / 2) * scaleY;\r\n    const sourceWidth = cropSize * scaleX;\r\n    const sourceHeight = cropSize * scaleY;\r\n\r\n    ctx.drawImage(\r\n      image,\r\n      sourceX, sourceY, sourceWidth, sourceHeight,\r\n      0, 0, cropSize, cropSize\r\n    );\r\n\r\n    return new Promise((resolve) => {\r\n      canvas.toBlob((blob) => {\r\n        const reader = new FileReader();\r\n        reader.onload = () => resolve(reader.result);\r\n        reader.readAsDataURL(blob);\r\n      }, \"image/jpeg\", 0.9);\r\n    });\r\n  };\r\n\r\n  // 处理鼠标按下\r\n  const handleMouseDown = (e) => {\r\n    e.preventDefault();\r\n    isDragging.current = true;\r\n    dragStart.current = { x: e.clientX - crop.x, y: e.clientY - crop.y };\r\n  };\r\n\r\n  // 处理鼠标移动\r\n  const handleMouseMove = (e) => {\r\n    if (!isDragging.current) return;\r\n    e.preventDefault();\r\n    \r\n    const newX = e.clientX - dragStart.current.x;\r\n    const newY = e.clientY - dragStart.current.y;\r\n    \r\n    // 限制拖拽范围\r\n    const maxX = (containerSize.width - 200) / 2;\r\n    const maxY = (containerSize.height - 200) / 2;\r\n    \r\n    setCrop({\r\n      x: Math.max(-maxX, Math.min(maxX, newX)),\r\n      y: Math.max(-maxY, Math.min(maxY, newY))\r\n    });\r\n  };\r\n\r\n  // 处理鼠标释放\r\n  const handleMouseUp = () => {\r\n    isDragging.current = false;\r\n  };\r\n\r\n  // 确认裁剪\r\n  const handleConfirmCrop = useCallback(async () => {\r\n    try {\r\n      const croppedImageData = await getCroppedImg(imageSrc, crop);\r\n      onCrop(croppedImageData);\r\n    } catch (e) {\r\n      console.error('裁剪失败:', e);\r\n    }\r\n  }, [imageSrc, crop, onCrop]);\r\n\r\n  return (\r\n    <div className=\"image-cropper\">\r\n      <div className=\"cropper-header\">\r\n        <h3>裁剪图片</h3>\r\n        <div className=\"cropper-actions\">\r\n          <button className=\"cancel-btn\" onClick={onCancel}>\r\n            <X size={16} />\r\n            取消\r\n          </button>\r\n          <button className=\"confirm-btn\" onClick={handleConfirmCrop}>\r\n            <Check size={16} />\r\n            确认\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"cropper-body\">\r\n        <div \r\n          className=\"cropper-container\"\r\n          ref={containerRef}\r\n          onMouseMove={handleMouseMove}\r\n          onMouseUp={handleMouseUp}\r\n          onMouseLeave={handleMouseUp}\r\n        >\r\n          {imageLoaded && (\r\n            <>\r\n              <img\r\n                ref={imageRef}\r\n                src={imageSrc}\r\n                alt=\"裁剪预览\"\r\n                className=\"crop-image\"\r\n                style={{\r\n                  width: containerSize.width,\r\n                  height: containerSize.height,\r\n                  transform: `translate(${crop.x}px, ${crop.y}px) scale(${zoom})`,\r\n                  transformOrigin: 'center center'\r\n                }}\r\n                onMouseDown={handleMouseDown}\r\n                draggable={false}\r\n              />\r\n              \r\n              {/* 裁剪框 */}\r\n              <div \r\n                className={`crop-frame ${cropShape === 'circle' ? 'circle' : 'rect'}`}\r\n              />\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"cropper-controls\">\r\n        <div className=\"zoom-control\">\r\n          <label>缩放:</label>\r\n          <input\r\n            type=\"range\"\r\n            min={0.5}\r\n            max={3}\r\n            step={0.1}\r\n            value={zoom}\r\n            onChange={(e) => setZoom(parseFloat(e.target.value))}\r\n          />\r\n          <span>{zoom.toFixed(1)}x</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"cropper-footer\">\r\n        <p>拖拽图片调整位置，使用滑块调整缩放</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageCropper;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}